<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>文件管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="ThemeBucket">
    <link rel="shortcut icon" href="#" type="image/png">

    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/style-responsive.css" rel="stylesheet">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap-reset.css" rel="stylesheet">

    <script src="/static/js/jquery-1.10.2.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.nicescroll.js"></script>
    <script src="/static/js/jquery-ui-1.9.2.custom.min.js"></script>


</head>
<body class="" style="background-color: #a8a8a8;">
<section>
    <div class="row">

    </div>
    <div class="row">
        <div class="col-lg-3"></div>
        <section class="panel panel-info col-lg-6">
            <div class="panel-heading custom-tab blue-tab">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#t1" data-toggle="tab">
                            <i class="fa fa-upload"></i>
                            文件上传(限制100Mb内)
                        </a>
                    </li>
                    <li class="">
                        <a href="#t2" data-toggle="tab">
                            <i class="fa fa-search"></i>
                            文件查找
                        </a>
                    </li>
                </ul>
            </div>
            <div class="panel-body">
                <div class="tab-content">
                    <div id="com_alert" th:if="${msg}!=null" th:switch="${msg.code}">
                        <div th:case="200" class="alert alert-success fade in" >
                            <button type="button" class="close close-sm" data-dismiss="alert">
                                <i class="fa fa-times"></i>
                            </button>
                            <label style="color: green" th:utext="${msg.message}"></label>
                        </div>
                        <div th:case="100" class="alert alert-info fade in" >
                            <button type="button" class="close close-sm" data-dismiss="alert">
                                <i class="fa fa-times"></i>
                            </button>
                            <label th:utext="${msg.message}"></label>
                        </div>
                        <div th:case="500" class="alert alert-danger fade in" >
                            <button type="button" class="close close-sm" data-dismiss="alert">
                                <i class="fa fa-times"></i>
                            </button>
                            <label style="color: red" th:utext="${msg.message}"></label>
                        </div>
                        <div th:case="404" class="alert alert-warning fade in" >
                            <button type="button" class="close close-sm" data-dismiss="alert">
                                <i class="fa fa-times"></i>
                            </button>
                            <label style="color: orange" th:utext="${msg.message}"></label>
                        </div>
                    </div>
                    <div class="tab-pane active" id="t1">
                        <form class="form-horizontal" style="padding: 8px" action="/" method="post" role="form" onsubmit="return sub();" enctype="multipart/form-data">
                            <div class="form-group">
                                <label class="control-label" for="key"><label style="color: red">*</label>访问秘钥：</label>
                                <input class="form-control" type="password" id="key" name="key" placeholder="请输入访问秘钥" required>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="file"><label style="color: red">*</label>选择文件：</label>
                                <input type="file" id="file" name="file" required>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="fileName">文件名称：</label>
                                <input class="form-control" type="text" id="fileName" name="fileName" placeholder="请输入文件名称（选填）例：壁纸123" >
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="path">保存路径：</label>
                                <input class="form-control" type="text" id="path" name="path" placeholder="请输入保存路径（选填）例：image" >
                            </div>
                            <div>
                                <input type="submit" class="btn btn-search" value="上传">
                                <input type="reset" class="btn btn-default" value="取消">
                            </div>
                            <script>
                                $("#file").change(function () {
                                    var f = document.getElementById("file").files;
                                    var name=f[0].name;
                                    var size=f[0].size;
                                    var type=f[0].type;
                                    $("#fileName").val(name.substring(0,name.lastIndexOf(".")));
                                    // $("#path").val(size);
                                    if ((size/1048576)>=100) {
                                        alert("警告：文件大小超过限制100Mb！");
                                        $("#file").val(null);
                                        $("#fileName").val(null);
                                        // $("#path").val(null);
                                    }
                                });
                                function sub() {
                                    var key=$("#key").val();
                                    var file=$("#file").val();
                                    if (key.length>0){
                                        if (file.length>0){
                                            return true;
                                        } else {
                                            alert("请选择文件");
                                        }
                                    } else {
                                       alert("请输入秘钥");
                                    }
                                    return false;
                                }
                            </script>
                        </form>
                    </div>

                    <div class="tab-pane" id="t2">
                        文件查找
                    </div>
                </div>

            </div>
        </section>
        <div class="col-lg-3"></div>
    </div>
</section>
<script src="/static/js/scripts.js"></script>
</body>
</html>